<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Riepilogo - Cinema Elite</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <style>

         .event-hero {
            padding: 120px 0 60px;
            background: linear-gradient(to bottom, rgba(14, 42, 42, 0.8), #0e2a2a), 
                        url('https://images.unsplash.com/photo-1514306191717-452ec28c7814?auto=format&fit=crop&q=80&w=2070');
            background-size: cover;
            background-position: center;
        }
        .guest-img {
            border: 3px solid #d49a5a;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .event-info-card {
            background-color: #143737;
            border: 1px solid #d49a5a;
            border-radius: 15px;
            padding: 25px;
        }

        :root {
            --gold: #D49A5A;
            --dark-green: #143737;
            --deep-bg: #0b1d1d;
            --light-gold: #f5e9da;
        }

        body {
            background-color: var(--deep-bg);
            color: var(--light-gold);
            font-family: 'Segoe UI', sans-serif;
            overflow-x: hidden;
        }

        /* Navbar */
        .navbar {
            background-color: #143737;
            border-bottom: 2px solid #D49A5A;
        }

        .navbar .nav-link {
            color: #f5e9da !important;
        }

        .navbar .nav-link:hover {
            color: #D49A5A !important;
        }

        /* Content */
        .overlay {
            background: rgba(11, 29, 29, 0.9);
            min-height: 100vh;
            padding-top: 80px;
        }

        /* ÙƒØ§Ø±Øª Ù…Ù„Ø®Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª - Ø­Ø¬Ù… Ø£ØµØºØ± */
        .info-card {
            background: rgba(20, 55, 55, 0.8);
            border: 1px solid var(--gold);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .summary-item {
            margin-bottom: 10px;
            border-bottom: 1px solid rgba(212, 154, 90, 0.1);
            padding-bottom: 5px;
        }

        .data-label {
            color: var(--gold);
            font-size: 0.75rem;
            text-transform: uppercase;
            margin: 0;
        }

        .data-value {
            font-size: 1rem;
            font-weight: 500;
            margin: 0;
        }

        /* Ø§Ù„Ø³Ø§ÙŠØ¯ Ø¨Ø§Ø± Ø§Ù„Ù…Ø·ÙˆØ± - Ø£Ù†Ø­Ù ÙˆØ£Ø´ÙŠÙƒ */
        .offcanvas {
            width: 350px !important;
            background: var(--dark-green) !important;
            color: white;
            border-left: 2px solid var(--gold) !important;
        }

        .edit-card {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
        }

        .form-select,
        .form-control {
            background-color: #0b1d1d !important;
            border: 1px solid var(--gold) !important;
            color: white !important;
            font-size: 0.9rem;
        }

        /* Ø§Ù„Ø²Ø±Ø§Ø± "Ø§Ù„Ù…Ù†ÙˆØ±" Ø§Ù„Ù„ÙŠ Ø·Ù„Ø¨Øª Ù†Ù„ØºÙŠ Ø§Ù„Ù€ Hover ÙÙŠÙ‡ Ø¨Ø³ Ù†Ø®Ù„ÙŠÙ‡ Ø´ÙŠÙƒ */
        .btn-pay {
            background-color: var(--gold) !important;
            color: var(--deep-bg) !important;
            font-weight: bold;
            border: none;
            transition: none;
        }


        /* 1. ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§ÙØ© Ù…Ù† ÙÙˆÙ‚ ÙÙŠ Ø§Ù„ØµÙØ­Ø© ÙƒÙ„Ù‡Ø§ */
.overlay {
    padding-top: 40px !important; /* Ø¨Ø¯Ù„ 80px Ø¹Ø´Ø§Ù† ÙŠØ±ÙØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù„ÙÙˆÙ‚ */
    min-height: calc(100vh - 80px); /* ÙŠØ¸Ø¨Ø· Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ù…Ø¹ Ø§Ù„Ù†Ø§Ù Ø¨Ø§Ø± */
}

/* 2. Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ ÙƒØ§Ø±Øª Ø§Ù„Ø¯ÙØ¹ Ø¹Ø´Ø§Ù† Ù…ÙŠØ¨Ù‚Ø§Ø´ Ø¨Ø¹ÙŠØ¯ Ø¹Ù† Ø§Ù„Ù…Ù„Ø®Øµ */
#checkoutSection {
    margin-top: -10px !important; /* Ù‚ÙŠÙ…Ø© Ø³Ø§Ù„Ø¨Ø© ØªØ±ÙØ¹Ù‡ Ù„ÙÙˆÙ‚ Ø´ÙˆÙŠØ© */
    transition: all 0.5s ease-in-out; /* Ø­Ø±ÙƒØ© Ù†Ø§Ø¹Ù…Ø© Ù„Ù…Ø§ ÙŠØ¸Ù‡Ø± */
}

/* 3. ØªØµØºÙŠØ± Ø§Ù„Ù…Ø³Ø§ÙØ§Øª Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© Ù„Ù„ÙƒØ±ÙˆØª Ø¹Ø´Ø§Ù† ØªØ¨Ø§Ù† "Ù…Ù„Ù…ÙˆÙ…Ø©" */
.info-card {
    padding: 15px 20px !important; /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¨Ø§Ø¯ÙŠÙ†Ø¬ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ */
}

.summary-item {
    margin-bottom: 5px !important; /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø³Ø·ÙˆØ± */
}
    </style>
</head>

<body>

    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="mx-5 navbar-brand" href="#"><img src="../img/Logo.png" alt="Logo"
                    style="max-height: 60px; border: 1px solid #D49A5A; border-radius: 8px;"></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-5 gap-3">
                    <li class="nav-item"><a class="nav-link active" href="home.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="home.html#prossimi-film">Prossimi Film</a></li>
                    <li class="nav-item"><a class="nav-link" href="evento.html">Eventi</a></li>
                </ul>
                <ul class="navbar-nav ms-auto gap-2 me-5">
                    <li class="nav-item"><a class="nav-link" href="accesso.html">Accedi</a></li>
                    <li class="nav-item"><a class="btn bottone" href="accesso.html">Registrati</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="overlay">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="info-card">
                        <h4 class="text-center mb-4" style="color: var(--gold);">RIEPILOGO ORDINE</h4>

                        <div id="displayArea">
                            <div class="summary-item">
                                <p class="data-label">Film</p>
                                <p id="resFilm" class="data-value">-</p>
                            </div>
                            <div class="summary-item">
                                <p class="data-label">Data e Ora</p>
                                <p id="resData" class="data-value">-</p>
                            </div>
                            <div class="summary-item">
                                <p class="data-label">Biglietti</p>
                                <p id="resTickets" class="data-value">-</p>
                            </div>
                            <div class="summary-item">
                                <p class="data-label">MenÃ¹</p>
                                <p id="resMenu" class="data-value">-</p>
                            </div>
                            <div class="text-center my-3">
                                <h3 style="color: var(--gold);">Totale: <span id="resTotale">â‚¬0.00</span></h3>
                            </div>
                        </div>

                        <div class="d-flex gap-2">
                            <button class="btn btn-outline-warning w-50" data-bs-toggle="offcanvas"
                                data-bs-target="#sideEdit">
                                <i class="fa-solid fa-sliders"></i> Modifica
                            </button>
                            <button class="btn btn-pay w-50">CHECKOUT</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="offcanvas offcanvas-end" id="sideEdit">
        <div class="offcanvas-header border-bottom border-warning">
            <h5 class="text-warning">Modifica Ordine</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body">
            <div class="edit-card text-center">
                <p class="data-label">Biglietti</p>
                <div class="d-flex justify-content-center align-items-center gap-3 mt-2">
                    <button class="btn btn-sm btn-warning" onclick="updateQty(-1)">-</button>
                    <span id="editQty" class="fw-bold fs-5">1</span>
                    <button class="btn btn-sm btn-warning" onclick="updateQty(1)">+</button>
                </div>
            </div>

            <div class="edit-card">
                <p class="data-label">Giorno</p>
                <select id="editGiorno" class="form-select mt-1">
                    <option value="LunedÃ¬">LunedÃ¬</option>
                    <option value="MartedÃ¬">MartedÃ¬ (3x2)</option>
                    <option value="MercoledÃ¬">MercoledÃ¬ (3x2)</option>
                    <option value="GiovedÃ¬">GiovedÃ¬ (3x2)</option>
                    <option value="VenerdÃ¬">VenerdÃ¬</option>
                    <option value="Sabato">Sabato</option>
                    <option value="Domenica">Domenica</option>
                </select>
            </div>

            <div class="edit-card">
                <p class="data-label">Orario</p>
                <select id="editOra" class="form-select mt-1">
                    <option value="18:00">15:00</option>
                    <option value="18:00">17:30</option>
                    <option value="20:00">20:00</option>
                    <option value="22:30">22:30</option>
                </select>
            </div>

            <div class="edit-card">
                <p class="data-label">MenÃ¹ Cinema</p>
                <select id="editMenuType" class="form-select mt-1">
                    <option value="Nessuno">Nessuno</option>
                    <option value="Popcorn & Drink">ğŸ¿ Popcorn & Drink (â‚¬8)</option>
                    <option value="Nachos & Beer">ğŸŒ® Nachos & Beer (â‚¬10)</option>
                    <option value="Hot Dog + Coca">ğŸŒ­ Hot Dog + Coca (â‚¬9.00)</option>
                </select>
            </div>

            <button class="btn btn-pay w-100 mt-3 py-2" onclick="applyChanges()">SALVA E AGGIORNA</button>
        </div>
    </div>


    <div id="checkoutSection" class="col-md-6 mt-4 mx-auto" style="display: none;">
    <div class="info-card">
        <h4 class="text-center mb-4" style="color: var(--gold);">DATI DI PAGAMENTO</h4>
        <form id="paymentForm">
            <div class="mb-3">
                <label class="data-label">Nome Completo</label>
                <input type="text" class="form-control" placeholder="Mario Rossi" required>
            </div>
            <div class="mb-3">
                <label class="data-label">Email</label>
                <input type="email" class="form-control" placeholder="mario@example.com" required>
            </div>
            <div class="mb-3">
                <label class="data-label">Numero Carta</label>
                <div class="input-group">
                    <span class="input-group-text bg-dark border-gold"><i class="fa-solid fa-credit-card text-warning"></i></span>
                    <input type="text" class="form-control" placeholder="xxxx xxxx xxxx xxxx" required>
                </div>
            </div>
            <div class="row">
                <div class="col-6 mb-3">
                    <label class="data-label">Scadenza</label>
                    <input type="text" class="form-control" placeholder="MM/YY" required>
                </div>
                <div class="col-6 mb-3">
                    <label class="data-label">CVV</label>
                    <input type="password" class="form-control" placeholder="***" required>
                </div>
            </div>
            <button type="submit" class="btn btn-pay w-100 py-3 mt-2">
                PAGA ORA <i class="fa-solid fa-lock ms-2"></i>
            </button>
        </form>
    </div>
</div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let data = JSON.parse(localStorage.getItem('ticketData')) || {};

        function init() {
            if (!data.film) return;
            document.getElementById('resFilm').innerText = data.film;
            document.getElementById('resData').innerText = `${data.giorno} - ${data.orario}`;
            document.getElementById('resTickets').innerText = data.quantita;
            document.getElementById('resMenu').innerText = data.menu;
            document.getElementById('resTotale').innerText = `â‚¬${data.totale}`;

            // Sync side menu
            document.getElementById('editQty').innerText = data.quantita;
            document.getElementById('editGiorno').value = data.giorno;
            document.getElementById('editMenuType').value = data.menu.split('(')[0].trim();
        }

        function updateQty(v) {
            let q = parseInt(document.getElementById('editQty').innerText);
            if (q + v >= 1) document.getElementById('editQty').innerText = q + v;
        }

        function applyChanges() {
            // ØªØ­Ø¯ÙŠØ« ÙƒØ§Ø¦Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            data.quantita = parseInt(document.getElementById('editQty').innerText);
            data.giorno = document.getElementById('editGiorno').value;
            data.menu = document.getElementById('editMenuType').value;

            // Ø­Ø³Ø§Ø¨ Ø¨Ø³ÙŠØ· (Ù„Ù„Ù…Ø«Ø§Ù„)
            let base = data.quantita * 10;
            if (data.menu !== "Nessuno") base += 8;
            data.totale = base.toFixed(2);

            localStorage.setItem('ticketData', JSON.stringify(data));
            init(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
            bootstrap.Offcanvas.getInstance(document.getElementById('sideEdit')).hide();
        }

        init();


        // 1. Ø±Ø¨Ø· Ø²Ø±Ø§Ø± Ø§Ù„ØªØ´ÙŠÙƒ Ø£ÙˆØª Ø¨Ø¸Ù‡ÙˆØ± Ø§Ù„ÙÙˆØ±Ù…
document.querySelector('.btn-pay').addEventListener('click', function() {
    // Ø¥Ø®ÙØ§Ø¡ ÙƒØ§Ø±Øª Ø§Ù„Ù…Ù„Ø®Øµ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„Ùˆ Ø¹Ø§ÙŠØ² ØªÙˆÙØ± Ù…Ø³Ø§Ø­Ø©) Ø£Ùˆ Ø§Ù„Ù†Ø²ÙˆÙ„ Ù„Ù„ÙÙˆØ±Ù…
    document.getElementById('checkoutSection').style.display = 'block';
    
    // Ø³ÙƒØ±ÙˆÙ„ Ù†Ø§Ø¹Ù… Ù„Ù„ÙÙˆØ±Ù… Ø£ÙˆÙ„ Ù…Ø§ ÙŠØ¸Ù‡Ø±
    document.getElementById('checkoutSection').scrollIntoView({ behavior: 'smooth' });
});

// 2. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯ÙØ¹ (Simulation)
document.getElementById('paymentForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    // Ù‡Ù†Ø§ Ø¨Ù†Ø¹Ù…Ù„ ØªØ£Ø«ÙŠØ± Ø§Ù„ØªØ­Ù…ÙŠÙ„
    const btn = e.target.querySelector('button');
    btn.innerHTML = '<span class="spinner-border spinner-border-sm"></span> Elaborazione...';
    btn.disabled = true;

    setTimeout(() => {
        alert('Pagamento Completato con Successo! Riceverai il biglietto via email.');
        // Ù…Ù…ÙƒÙ† ØªÙˆØ¬Ù‡Ù‡ Ù„ØµÙØ­Ø© Ø´ÙƒØ± Ø£Ùˆ ØªØ±Ø¬Ø¹Ù‡ Ù„Ù„Ù‡ÙˆÙ…
        window.location.href = 'home.html';
    }, 2500);
});


    </script>
</body>

</html>